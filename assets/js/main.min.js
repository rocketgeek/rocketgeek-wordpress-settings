!function($,document){var rgs={cache:function(){rgs.els={},rgs.vars={},rgs.els.tab_links=$(".rgs-nav__item-link"),rgs.els.submit_button=$(".rgs-button-submit")},on_ready:function(){rgs.cache(),rgs.trigger_dynamic_fields(),rgs.setup_groups(),rgs.tabs.watch(),rgs.watch_submit(),rgs.control_groups(),rgs.setup_visual_radio_checkbox_field(),rgs.importer.init(),$(document.body).on("change",'input, select, textarea, .rgs-visual-field input[type="radio"], .rgs-visual-field input[type="checkbox"]',rgs.control_groups)},trigger_dynamic_fields:function(){rgs.setup_timepickers(),rgs.setup_datepickers()},tabs:{watch:function(){var tab_id=rgs.tabs.get_tab_id();tab_id&&rgs.tabs.set_active_tab(tab_id),rgs.els.tab_links.on("click",(function(e){var tab_id=$(this).attr("href");rgs.tabs.set_active_tab(tab_id),e.preventDefault()})),$(".rgs-internal-link").click(rgs.tabs.follow_link)},has_storage:"undefined"!=typeof Storage,follow_link:function(e){e.preventDefault();var href=$(this).attr("href"),tab_id,parts,element_id;0==href.indexOf("#tab-")&&(href.indexOf("|")>0?(tab_id=(parts=href.split("|"))[0],element_id=parts[1]):tab_id=href,rgs.tabs.set_active_tab(tab_id),element_id&&$("html, body").animate({scrollTop:$(`#${element_id}`).offset().top-100},"fast"))},set_tab_id:function(tab_id){rgs.tabs.has_storage&&localStorage.setItem(rgs.tabs.get_option_page()+"_rgs_tab_id",tab_id)},get_tab_id:function(){return window.location.hash&&$(`.rgs-nav a[href="${window.location.hash}"]`).length?window.location.hash:!!rgs.tabs.has_storage&&localStorage.getItem(rgs.tabs.get_option_page()+"_rgs_tab_id")},set_active_tab:function(tab_id){var $tab=$(tab_id),$tab_link=$('.rgs-nav__item-link[href="'+tab_id+'"]');($tab.length<=0||$tab_link.length<=0)&&(tab_id=($tab_link=$(".rgs-nav__item-link").first()).attr("href"),$tab=$(tab_id)),rgs.els.tab_links.parent().removeClass("rgs-nav__item--active"),$('a[href="'+tab_id+'"]').parent().addClass("rgs-nav__item--active"),$(".rgs-tab").removeClass("rgs-tab--active"),$tab.addClass("rgs-tab--active"),rgs.tabs.set_tab_id(tab_id)},get_option_page:function(){return $('input[name="option_page"]').val()}},setup_timepickers:function(){$(".timepicker").not(".hasTimepicker").each((function(){var timepicker_args=$(this).data("timepicker");""===timepicker_args&&(timepicker_args={}),$(this).timepicker(timepicker_args)}))},setup_datepickers:function(){$(document).on("focus",".datepicker:not(.hasTimepicker)",(function(){var datepicker_args=$(this).data("datepicker");$(this).datepicker(datepicker_args)})),$(document).on("change",".datepicker",(function(){var datepicker=$(this).data("datepicker");!$(this).val()&&datepicker.settings&&datepicker.settings.altField&&$(datepicker.settings.altField).val("")}))},setup_groups:function(){rgs.reindex_groups(),$(document).on("click",".rgs-group__row-add",(function(){var $group=$(this).closest(".rgs-group"),$row=$(this).closest(".rgs-group__row"),template_name=$(this).data("template"),$template=$($("#"+template_name).html());return $template.find(".rgs-group__row-id").val(rgs.generate_random_id()),$row.after($template),rgs.reindex_group($group),rgs.trigger_dynamic_fields(),!1})),$(document).on("click",".rgs-group__row-remove",(function(){var $group=jQuery(this).closest(".rgs-group"),$row;return jQuery(this).closest(".rgs-group__row").remove(),rgs.reindex_group($group),!1}))},generate_random_id:function(){return(Number(String(Math.random()).slice(2))+Date.now()+Math.round(performance.now())).toString(36)},reindex_groups:function(){var $groups=jQuery(".rgs-group");$groups.length<=0||$groups.each((function(index,group){rgs.reindex_group(jQuery(group))}))},reindex_group:function($group){var reindex_attributes=["class","id","name","data-datepicker"];1===$group.find(".rgs-group__row").length?$group.find(".rgs-group__row-remove").hide():$group.find(".rgs-group__row-remove").show(),$group.find(".rgs-group__row").each((function(index){$(this).removeClass("alternate"),index%2==0&&$(this).addClass("alternate"),$(this).find("input").each((function(){var this_input=this,name=jQuery(this).attr("name");void 0!==name&&!1!==name&&$(this_input).attr("name",name.replace(/\[\d+\]/,"["+index+"]")),$.each(this_input.attributes,(function(){this.name&&this_input&&$.inArray(this.name,reindex_attributes)>-1&&$(this_input).attr(this.name,this.value.replace(/\_\d+\_/,"_"+index+"_"))}))})),$(this).find(".rgs-group__row-index span").html(index)}))},watch_submit:function(){rgs.els.submit_button.on("click",(function(){var $button,$wrapper,$form;$(this).closest(".rgs-settings").find("form").first().submit()}))},control_groups:function(){$(".show-if").each((function(index){var element=$(this),parent_tag=element.parent().prop("nodeName").toLowerCase();("td"===parent_tag||"label"===parent_tag||rgs.is_visual_field(element))&&(element.closest("tr").hide(),rgs.maybe_show_element(element,(function(){element.closest("tr").show()}))),"li"===parent_tag&&(element.closest("li").hide(),rgs.maybe_show_element(element,(function(){element.closest("li").show()}))),"div"!==parent_tag||rgs.is_visual_field(element)||(element.prev().hide(),element.next().hide(),element.next().hasClass("rgs-section-description")&&element.next().next().hide(),rgs.maybe_show_element(element,(function(){element.prev().show(),element.next().show(),element.next().hasClass("rgs-section-description")&&element.next().next().show()})))})),$(".hide-if").each((function(index){var element=$(this),parent_tag=element.parent().prop("nodeName").toLowerCase();("td"===parent_tag||"label"===parent_tag||rgs.is_visual_field(element))&&(element.closest("tr").show(),rgs.maybe_hide_element(element,(function(){element.closest("tr").hide()}))),"li"===parent_tag&&(element.closest("li").show(),rgs.maybe_hide_element(element,(function(){element.closest("li").hide()}))),"div"!==parent_tag||rgs.is_visual_field(element)||(element.prev().show(),element.next().show(),element.next().hasClass("rgs-section-description")&&element.next().next().show(),rgs.maybe_hide_element(element,(function(){element.prev().hide(),element.next().hide(),element.next().hasClass("rgs-section-description")&&element.next().next().hide()})))}))},is_visual_field:function(element){return element.parent().hasClass("rgs-visual-field__item-footer")},maybe_show_element:function(element,callback){var classes,controllers=element.attr("class").split(/\s+/).filter((function(item){return item.includes("show-if--")}));Array.from(controllers).forEach((function(control_group){var item=control_group.replace("show-if--","");if(item.includes("&&")){var and_group=item.split("&&"),show_item=!0;if(Array.from(and_group).forEach((function(and_item){rgs.get_show_item_bool(show_item,and_item)||(show_item=!1)})),show_item)return void callback()}else{var show_item=!0;if(show_item=rgs.get_show_item_bool(show_item,item))return void callback()}}))},maybe_hide_element:function(element,callback){var classes,controllers=element.attr("class").split(/\s+/).filter((function(item){return item.includes("hide-if--")}));Array.from(controllers).forEach((function(control_group){var item=control_group.replace("hide-if--","");if(item.includes("&&")){var and_group=item.split("&&"),hide_item=!0;if(Array.from(and_group).forEach((function(and_item){rgs.get_show_item_bool(hide_item,and_item)||(hide_item=!1)})),hide_item)return void callback()}else{var hide_item=!0;if(hide_item=rgs.get_show_item_bool(hide_item,item))return void callback()}}))},get_show_item_bool:function(show=!0,item){var split=item.split("==="),control=split[0],values=split[1].split("||"),control_value=rgs.get_controller_value(control,values);return values.includes(control_value)||(show=!show),show},get_controller_value:function(id,values){var control=$("#"+id);!control.length&&values.length&&(control=$("#"+id+"_"+values[0])),!control.length||"checkbox"!==control.attr("type")&&"radio"!==control.attr("type")||(control=!!control.is(":checked")&&control);var value=control.length?control.val():"undefined";return void 0===value&&(value=""),value.toString()},setup_visual_radio_checkbox_field:function(){var checked_class="rgs-visual-field__item--checked";$(document).on("change",'.rgs-visual-field input[type="radio"], .rgs-visual-field input[type="checkbox"]',(function(){var $this=$(this),$list=$this.closest(".rgs-visual-field"),$list_item=$this.closest(".rgs-visual-field__item"),$checked=$list.find("."+checked_class),is_multi_select;$list.hasClass("rgs-visual-field--image-checkboxes")?$this.prop("checked")?$list_item.addClass(checked_class):$list_item.removeClass(checked_class):($checked.removeClass(checked_class),$list_item.addClass(checked_class))}))},importer:{init:function(){$(".rgs-import__button").click((function(){$(this).parent().find(".rgs-import__file_field").trigger("click")})),$(".rgs-import__file_field").change((function(e){$this=$(this),$td=$this.closest("td");var file_field=$this.get(0),settings="",rgs_import_nonce=$td.find(".rgs_import_nonce").val();rgs_import_option_group=$td.find(".rgs_import_option_group").val(),void 0!==file_field.files[0]?confirm("Are you sure you want to overrid existing setting?")&&rgs.importer.read_file_text(file_field.files[0],(function(content){try{JSON.parse(content),settings=content}catch{settings=!1,alert(rgs_vars.invalid_file)}settings&&($td.find(".spinner").addClass("is-active"),$.ajax({url:"admin-ajax.php",type:"POST",data:{action:"rgs_import_settings",settings:settings,option_group:rgs_import_option_group,_wpnonce:rgs_import_nonce},success:function(response){response.success?location.reload():alert(rgs_vars.something_went_wrong),$td.find(".spinner").removeClass("is-active")}}))})):alert(rgs_vars.select_file)}))},read_file_text(file,callback){const reader=new FileReader;reader.readAsText(file),reader.onload=()=>{callback(reader.result)}}}};$(document).ready(rgs.on_ready)}(jQuery,document);